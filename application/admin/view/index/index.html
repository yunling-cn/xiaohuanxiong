{extend name="pub/base" /}
{block name="title"}
<title>后台首页</title>
{/block}
{block name="body"}
<div class="Hui-admin-article">
    <nav class="breadcrumb" style="background-color:#fff;padding: 0 24px">
        首页
        <span class="c-gray en">/</span>
        站点配置
        <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px"
           href="javascript:location.replace(location.href);" title="刷新"><i class="Hui-iconfont">&#xe68f;</i></a>
    </nav>
    <div class="Hui-article">
        <article class="clearfix pd-20">
            <div class="panel">
                <div class="panel-body">
                    <div id="tab-system" class="HuiTab">
                        <div class="tabBar cl"><span>基本设置</span><span>分页设置</span><span>缓存设置</span></div>
                        <div class="tabCon">
                            <form action="/admin/index/update" method="post" class="form form-horizontal">
                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>站点名称：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$site_name}" name="site_name">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>站点副标题：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$site_sub_name}"
                                               name="site_sub_name">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>关键字：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$keyword}" name="keyword">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>描述：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$description}" name="description">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">网站域名：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$url}" name="url">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">图片域名：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$img_site}" name="img_site">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">静态资源域名：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$static_site}" name="static_site">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">密码盐：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$salt}" name="salt"
                                               readonly="readonly">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">api密钥：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$api_key}" name="api_key">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">app密钥：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$app_key}" name="app_key">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">移动端模板目录名：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                         <span class="select-box" style="width:150px;">
                                        <select name="touch_front_tpl" class="select">
                                            {volist name="tpl_dirs" id="vo"}
                                            <option value="{$vo}"
                                                    {if $vo== $touch_front_tpl}
                                                    selected
                                                    {/if}
                                            >{$vo}</option>
                                            {/volist}
                                        </select>
                                         </span>
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">电脑端模板目录名：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                         <span class="select-box" style="width:150px;">
                                        <select name="pc_front_tpl" class="select">
                                            {volist name="tpl_dirs" id="vo"}
                                            <option value="{$vo}"
                                                    {if $vo== $pc_front_tpl}
                                                    selected
                                                    {/if}
                                            >{$vo}</option>
                                            {/volist}
                                        </select>
                                         </span>
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">支付方式：</label>
                                    <span class="select-box" style="width:150px;">
                        <select class="select" name="payment" size="1">
                             <option value="Default"
                                     {if $payment== 'Default'}
                                    selected
                                    {/if}
                            >无支付</option>
                            <option value="Zhapay"
                                    {if $payment== 'Zhapay'}
                                    selected
                                    {/if}
                            >幻兮支付</option>
                            <option value="Paypal"
                                    {if $payment== 'Paypal'}
                                    selected
                                    {/if}
                            >paypal支付</option>
                        </select>
				    </span>

                                </div>

                                <div class="row clearfix">
                                    <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
                                        <input class="btn btn-primary radius" type="submit"
                                               value="&nbsp;&nbsp;提交&nbsp;&nbsp;">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="tabCon">
                            <form action="/admin/index/pagenum" method="post" class="form form-horizontal">
                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>后台分页数目：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$back_end_page}"
                                               name="back_end_page">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>pc端分类页展示数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$booklist_pc_page}"
                                               name="booklist_pc_page">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>移动端分类页展示数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$booklist_mobile_page}"
                                               name="booklist_mobile_page">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>pc端更新页展示数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$update_pc_page}"
                                               name="update_pc_page">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>移动端更新页展示数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$update_mobile_page}"
                                               name="update_mobile_page">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>pc端搜索结果数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$search_result_pc}"
                                               name="search_result_pc">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>移动端搜索结果数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$search_result_mobile}"
                                               name="search_result_mobile">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>pc端排行数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$rank_result_pc}"
                                               name="rank_result_pc">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>移动端排行数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$rank_result_mobile}"
                                               name="rank_result_mobile">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3"><span
                                            class="c-red">*</span>阅读页图片展示数：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <input type="text" class="input-text" value="{$img_per_page}"
                                               name="img_per_page">
                                    </div>
                                </div>

                                <div class="row clearfix">
                                    <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
                                        <input class="btn btn-primary radius" type="submit"
                                               value="&nbsp;&nbsp;提交&nbsp;&nbsp;">
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="tabCon">
                            <form action="/admin/index/cache" method="post" class="form form-horizontal">

                                <div class="row clearfix">
                                    <label class="form-label col-xs-4 col-sm-3">缓存容器类型：</label>
                                    <div class="formControls col-xs-8 col-sm-9">
                                        <div class="skin-minimal">
                                            <div class="radio-box">
                                                <input name="cache_type" value="File" type="radio" id="radio-file" {if
                                                       $cache_type== 'File'}checked{/if}>
                                                <label for="radio-file">File</label>
                                            </div>
                                            <div class="radio-box">
                                                <input name="cache_type" value="Redis" type="radio" id="radio-redis" {if
                                                       $cache_type== 'Redis'}checked{/if}>
                                                <label for="radio-redis">Redis</label>
                                            </div>
                                            <div class="radio-box">
                                                <input name="cache_type" value="Memcached" type="radio"
                                                       id="radio-memcached" {if $cache_type== 'Memcached'}checked{/if}>
                                                <label for="radio-memcached">Memcached</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row clearfix" id="cache_host" {if $cache_type=='File'}style="display: none
                                "{/if}>
                                <label class="form-label col-xs-4 col-sm-3">缓存容器地址：</label>
                                <div class="formControls col-xs-8 col-sm-9">
                                    <input type="text" class="input-text" value="{$cache_host}" name="cache_host">
                                </div>
                        </div>

                        <div class="row clearfix" id="cache_port" {if $cache_type=='File'}style="display: none
                        "{/if}>
                        <label class="form-label col-xs-4 col-sm-3">缓存容器端口：</label>
                        <div class="formControls col-xs-8 col-sm-9">
                            <input type="number" class="input-text" value="{$cache_port}" name="cache_port">
                        </div>
                    </div>

                    <div class="row clearfix" id="cache_pwd" {if $cache_type!='Redis' }style="display: none" {
                    /if}>
                    <label class="form-label col-xs-4 col-sm-3">缓存容器密码：</label>
                    <div class="formControls col-xs-8 col-sm-9">
                        <input type="text" class="input-text" value="{$cache_pwd}" name="cache_pwd"
                               placeholder="不设置密码请留空">
                    </div>
                </div>

                <div class="row clearfix" id="redis_prefix" {if $cache_type!='Redis' }style="display: none" {
                /if}>
                <label class="form-label col-xs-4 col-sm-3">redis前缀：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <input type="text" class="input-text"
                           value="{$redis_prefix}"
                           name="redis_prefix">
                </div>
            </div>

                                <div class="row clearfix">
                                    <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
                                        <input class="btn btn-primary radius" type="submit"
                                               value="&nbsp;&nbsp;提交&nbsp;&nbsp;">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>


        </article>
    </div>
</div>
<script>
    $(function () {
        $("#tab-system").Huitab();
        $('.skin-minimal input').iCheck({
            // checkboxClass: 'icheckbox-blue',
            radioClass: 'iradio-blue',
            increaseArea: '20%'
        });
        // alert(jQuery.fn.jquery);
    });

    var cache_port_default = {$cache_port};

    $('#radio-file').on('ifChecked', function () {
        $('#cache_host').css('display', 'none');
        $('#cache_port').css('display', 'none');
        $('#cache_pwd').css('display', 'none');
        $('#redis_prefix').css('display', 'none');

    });

    $('#radio-redis').on('ifChecked', function () {
        $('#cache_host').css('display', 'block');
        $('#cache_port').css('display', 'block');
        $('#cache_pwd').css('display', 'block');
        $('#redis_prefix').css('display', 'block');

        if (cache_port_default === -1) {
            $('input[name=cache_port]').val('6379');
        }
    });

    $('#radio-memcached').on('ifChecked', function () {
        $('#cache_host').css('display', 'block');
        $('#cache_port').css('display', 'block');
        $('#cache_pwd').css('display', 'none');
        $('#redis_prefix').css('display', 'none');

        if (cache_port_default === -1) {
            $('input[name=cache_port]').val('11211');
        }

    });

</script>
{/block}